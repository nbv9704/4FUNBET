# server/.env

# ===== Server =====
PORT=3001
NODE_ENV=production  # ✅ THÊM: quan trọng cho production

# ===== Database =====
MONGO_URI=mongodb+srv://appuser:972004@cado4fun.koywmxx.mongodb.net/cado4fun?retryWrites=true&w=majority

# ===== Authentication =====
JWT_SECRET=779167e849cb0334f6b82d27a82d6e20a20e6a650624ea7814ce394e28354a1aeac20c632b00e366487a5d3ebeb9ed5a

# ===== CORS & Frontend URL =====
# ✅ THÊM: Cần cho CORS whitelist và Socket.IO
CLIENT_URL=http://localhost:3000
FRONTEND_URL=http://localhost:3000
# Nếu deploy production, thêm domain thật:
# CLIENT_URL=https://yourdomain.com
# FRONTEND_URL=https://yourdomain.com

# ===== PvP Cron (override mặc định) =====
# Tần suất cron quét (ms)
PVP_SWEEP_INTERVAL_MS=60000              # prod: 60000 / test: 5000

# Xoá phòng chờ (waiting) quá bao lâu (ms)
PVP_MAX_WAITING_AGE_MS=1800000           # prod: 1800000 (30m) / test: 60000

# Coinflip: "ân hạn" sau revealAt trước khi auto-finish (ms)
PVP_COINFLIP_GRACE_MS=10000              # prod: 10000 / test: 1000

# Dice: "ân hạn" sau advanceAt trước khi auto-advance/finish (ms)
PVP_DICE_GRACE_MS=4000                   # prod: 2000-5000 / test: 2000

# Dice: phòng active nhưng không pending & không ai bấm roll tiếp → auto-roll sau (ms)
PVP_DICE_IDLE_MS=60000                   # prod: 60000 / test: 10000

# Dice: đã Start nhưng CHƯA có roll nào & đứng yên quá lâu → cancel & refund (ms)
PVP_DICE_UNSTARTED_REFUND_MS=90000       # prod: 900000 (15m) / test: 60000

# Cron log level: error | info | debug | silent
PVP_CRON_LOG_LEVEL=error                 # prod: error / test: debug / off: silent

# ===== HTTP Logger =====
HTTP_LOG_LEVEL=off                       # info | off (off = tắt toàn bộ log HTTP)
HTTP_LOG_IGNORE_PATHS=/api/admin/pvp/health

# ===== Cron File Logging (Optional) =====
# ✅ THÊM: Cho production monitoring
PVP_CRON_FILE_LOG=0                      # 0=off, 1=on (ghi log ra file)
PVP_CRON_LOG_DIR=./logs                  # Thư mục chứa log files
PVP_CRON_LOG_MAX_MB=10                   # Max size mỗi file log (MB)